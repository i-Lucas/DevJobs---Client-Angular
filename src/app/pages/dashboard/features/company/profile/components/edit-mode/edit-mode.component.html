<app-modal 
    [isOpen]="isOpen"
    [loading]="loading"
    [icon]="'apartment'"
    [title]="'Editar Empresa'"
    (onClose)="onClose.emit()"
>
    @if(profile) {

        <p-tabView>
            <p-tabPanel header="Endereço">
                <div class="my-4">

                    <div class="flex justify-content-end">
                        <i  pTooltip="Atualizado em: {{ addressForm.value.updatedAt | DD_MM_YYYY }}"
                            class="material-icons cursor-pointer">help
                        </i>
                    </div>

                    <app-address-form 
                        (cepExternApiError)="onCepExternApiError.emit($event)"
                        [addressForm]="addressForm"
                    />
                    <div class="mt-4">
                        <p-button 
                            size="small"
                            label="Salvar"
                            icon="pi pi-check"
                            [loading]="loading"
                            [disabled]="addressForm.invalid || loading"
                            (click)="onSave.emit({ form: addressForm, identifier: 'COMPANY_ADDRESS' })"                            
                        />
                    </div>
                </div>     

            </p-tabPanel>
            <p-tabPanel header="Detalhes">
                <div class="my-4">

                    <div class="flex justify-content-end">
                        <i  pTooltip="Atualizado em: {{ detailsForm.value.updatedAt | DD_MM_YYYY }}"
                            class="material-icons cursor-pointer">help
                        </i>
                    </div>

                    <app-company-details-form
                        [detailsForm]="detailsForm"
                    />

                    <div class="mt-4">
                        <p-button 
                            size="small"
                            label="Salvar"
                            icon="pi pi-check"
                            [loading]="loading"
                            [disabled]="detailsForm.invalid || loading"
                            (click)="onSave.emit({ form: detailsForm, identifier: 'COMPANY_DETAILS' })"
                        />
                    </div>
                </div>

            </p-tabPanel>
            <p-tabPanel header="Redes Sociais">
                <div class="my-4">

                    <div class="flex justify-content-end">
                        <i  pTooltip="Atualizado em: {{ socialNetworkForm.value.updatedAt | DD_MM_YYYY }}"
                            class="material-icons cursor-pointer">help
                        </i>
                    </div>

                    <app-company-social-network-form
                        [socialNetworkForm]="socialNetworkForm"
                    />

                    <div class="mt-4">
                        <p-button 
                            size="small"
                            label="Salvar"
                            icon="pi pi-check"
                            [loading]="loading"
                            [disabled]="socialNetworkForm.invalid || loading"
                            (click)="onSave.emit({ form: socialNetworkForm,  identifier: 'COMPANY_SOCIAL' })"          
                        />
                    </div>
                </div>

            </p-tabPanel>
            <p-tabPanel header="Contato">
                <div class="my-4">

                    <div class="flex justify-content-end">
                        <i  pTooltip="Atualizado em: {{ contactForm.value.updatedAt | DD_MM_YYYY }}"
                            class="material-icons cursor-pointer">help
                        </i>
                    </div>

                    <app-company-contact-form
                        [contactForm]="contactForm"
                    />

                    <div class="mt-4">
                        <p-button 
                            size="small"
                            label="Salvar"
                            icon="pi pi-check"
                            [loading]="loading"
                            [disabled]="contactForm.invalid || loading"
                            (click)="onSave.emit({ form: contactForm, identifier: 'COMPANY_CONTACT' })"                                                            
                        />
                    </div>
                </div>

            </p-tabPanel>
            <p-tabPanel header="Permissões">
                <div class="my-4 min-h-screen">
                    <p class="app-sm">Em breve</p>
                </div>
            </p-tabPanel>
        </p-tabView>        
    }

</app-modal>